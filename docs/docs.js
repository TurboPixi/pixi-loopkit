!function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){e.exports=PIXI},function(e,t,i){"use strict";i.r(t),i.d(t,"LoopKit",(function(){return l})),i.d(t,"Props",(function(){return n})),i.d(t,"Loop",(function(){return h})),i.d(t,"scale",(function(){return a})),i.d(t,"hexColor",(function(){return p}));var r=i(2),s=i.n(r);function n(e){let t,i={},r={},s=[],n=[],o=e=>{n.push(e);let r=i[e](t);return n.splice(n.lastIndexOf(e),1),r},a={addWatcher:e=>{s.push(e)},removeWatcher:e=>{s.splice(s.indexOf(e),1)},loadState(e){Object.assign(t,e)},refresh(){Object.keys(i).forEach(e=>{t[e]=o(e)})},_dependencies:()=>r,derivedProps:()=>Object.fromEntries(Object.keys(i).map(e=>[e,t[e]]))};return t=new Proxy(a,{get:(e,t)=>(n.forEach(e=>{(r[t]||[]).includes(e)||(r[t]=r[t]||[],r[t].push(e))}),Reflect.has(e,t)?e[t]:Reflect.has(i,t)?(e[t]=o(t),e[t]):(e[t]=null,null)),set(e,n,a){let h=Reflect.has(e,n)||Reflect.has(i,n),c=e[n];return"function"==typeof a?(i[n]=a,h&&(a=o(n))):(Reflect.has(i,n)&&!Reflect.has(e,n)&&o(n),e[n]=a),h&&(a!==c&&((e,t,i)=>{s.forEach(r=>{r(e,t,i)})})(n,a,c),r[n]&&r[n].forEach(e=>{t[e]=o(e)})),!0}}),Object.entries(e||{}).forEach(([e,i])=>{t[e]=i}),a.refresh(),t}function o(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function a(e,t,i,r,s){let n=t+(i-t)*(e=null==e?(r-t)/(i-t)||0:e),a=o(t)==t&&o(i)==i;return n=o(n,a&&!s?0:6),s&&(n-=n%s),n}class h{constructor(e=4,t=60){this._loopSeconds=e,this.fps=t,this.frameFull=0}get frames(){return this.loopSeconds*this.fps-1}get frame(){return this.frameFull/this.frames}get loopSeconds(){return this._loopSeconds}set loopSeconds(e){let t=this.frame;this._loopSeconds=e,this.frameFull=Math.floor(this.frames*t)}delay(e){return Math.abs(this.frameFull-e)%this.frames/this.frames}tick(e){let t=this.frameFull+(e||1);this.frameFull=(this.frames+t)%this.frames}}var c=i(0);class l{constructor({canvas:e,onFrame:t,antialias:i,bgColor:r,loopSeconds:s}){e="string"==typeof e?document.querySelector(e):e,this.canvas=e,this.width=0,this.height=0,this.looper=new h(s||1),this.app=new c.Application({view:e,antialias:void 0===i||i}),r&&(this.bgColor=p(r),this.bg=new c.Graphics,this.app.stage.addChild(this.bg)),this.graphics=new c.Graphics,this.app.stage.addChild(this.graphics),this.setDimensions=this.setDimensions.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this._connectListeners(!0),this._renderPending=null,this.setDimensions(),this.app.ticker.add(this._onFrame.bind(this)),t?this.onFrame=t.bind(this):this.stop(),this.render()}_onFrame(e){this.onFrame&&(!1!==e&&this.looper.tick(),this.onFrame(this.graphics,this.looper.frame))}start(){this.onFrame&&this.app.ticker.start()}stop(){this.app.ticker.stop()}pause(e){(e=void 0===e?this.app.ticker.started:e)?this.stop():this.start()}render(){this.app.ticker.started||(window.cancelAnimationFrame(this._renderPending),this._renderPending=window.requestAnimationFrame(()=>{this._onFrame(!1),this.app.render()}))}addChild(e){this.graphics.addChild(e)}removeChild(e){this.graphics.removeChild(e)}setDimensions(e){let t=this.canvas.parentElement.getBoundingClientRect();[this.width,this.height]=[t.width,t.height],this.canvas.style.width=this.width,this.canvas.style.height=this.height,this.app.renderer.resize(t.width,t.height),this.bg&&(this.bg.clear(),this.bg.beginFill(this.bgColor),this.bg.drawRect(0,0,this.width,this.height),this.bg.endFill())}export(e){let t=c.RenderTexture.create({width:2*this.width,height:2*this.height});t.setResolution(2),this.app.renderer.render(this.app.stage,t);let i=this.app.renderer.plugins.extract.base64(t,"image/png",1),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download",e||"capture.png"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}exportLoop(){this.stop(),this.looper.frameFull=0;for(let e=0;e<=this.looper.frames;e++){this._onFrame(!1);let t=("0000"+e).slice(-4);this.export(`frame-${t}.png`),this.looper.tick()}}onKeyDown(e){" "==e.key?this.pause():"ArrowRight"==e.key?(this.looper.tick(e.shiftKey?1:e.ctrlKey?60:10),this.render()):"ArrowLeft"==e.key?(this.looper.tick(e.shiftKey?-1:e.ctrlKey?-60:-10),this.render()):"e"==e.key?(this.stop(),this.exportLoop()):"p"==e.key&&this.export()}_connectListeners(e){let t=e?window.addEventListener:window.removeEventListener;t("resize",this.setDimensions),t("keydown",this.onKeyDown)}destroy(){this._connectListeners(!1),this.app.destroy()}}const d={LoopKit:l,Props:n,Loop:h,scale:a};t.default={loopkit:d};let p=e=>s()(e).num()},function(e,t){e.exports=chroma},function(e,t,i){"use strict";i.r(t);var r=i(1);let s={"direct-draw":function(){let e=new r.LoopKit({canvas:".direct-draw canvas",bgColor:"#eee"}).graphics;e.lineStyle(3,Object(r.hexColor)("#666"),1),e.drawRect(100.5,100.5,100,100)},"as-object":function(){class e extends PIXI.Graphics{constructor(e,t,i,s){super(),[this.x,this.y]=[e+i/2,t+s/2],this.lineStyle(3,Object(r.hexColor)("#555"),1),this.drawRect(-i/2,-s/2,i,s)}}let t=new e(100,100,100,100);new r.LoopKit({canvas:".as-object canvas",bgColor:"#eee",onFrame:()=>{t.rotation+=.01}}).addChild(t)}};Object.entries(s).forEach(([e,t])=>{let i=t.toString().split("\n").slice(1,-1).join("\n"),r=document.createElement("code");r.innerHTML=i;let s=document.querySelector(`.${e} pre`);s.classList.add("language-js"),s.appendChild(r)}),document.querySelectorAll("code").forEach(e=>{let t=e.innerHTML;t=t.replace(/Object\(_src__WEBPACK_IMPORTED_MODULE_.*\["(.*)"\]\)/g,"$1"),t=t.replace(/_src__WEBPACK_IMPORTED_MODULE_.*\["(.*)"\]/g,"$1"),t=Prism.plugins.NormalizeWhitespace.normalize(t),e.innerHTML=t}),document.querySelector(".loading").classList.remove("loading"),Object.values(s).forEach(e=>e())}]);